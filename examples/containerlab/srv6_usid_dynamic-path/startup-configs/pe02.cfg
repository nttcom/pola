chassis {
    network-services enhanced-ip;
}

interfaces {
    ge-0/0/0 {
        description "to:p01";
        unit 0 {
            family iso;
            family inet6;
        }
    }
    ge-0/0/1 {
        description "to:p02";
        unit 0 {
            family iso;
            family inet6;
        }
    }
    ge-0/0/2 {
        description "POLA-PCE";
        unit 0 {
            family inet6 {
                address fd00::2/64;
            }
        }
    }
    lo0 {
        unit 0 {
            family iso {
                address 49.0000.0000.0001.0002.00;
            }
            family inet6 {
                address fd00:ffff::2/128;
            }
        }
    }
}

routing-options {
    router-id 10.255.0.2;
    autonomous-system 65000;
    forwarding-table {
        srv6-chain-merge;
    }
    source-packet-routing {
        srv6 {
            no-reduced-srh;
            block usid-block {
                fcbb:bb00::/32;
                local-micro-sid {
                    maximum-static-sids 1000;
                }
            }
            locator loc-pe02 {
                fcbb:bb00:1002::/48;
                micro-sid {
                    block-name usid-block;
                    flavor psp;
                    flavor usd;
                }
            }
        }
    }
}

protocols {
    isis {
        level 1 disable;
        level 2 {
            wide-metrics-only;
        }
        no-ipv4-routing;
        topologies {
            ipv6-unicast;
        }
        net 49.0000.0000.0001.0002.00;
        interface ge-0/0/0.0 {
            point-to-point;
            level 2 {
                srv6-adjacency-segment {
                    unprotected {
                        locator loc-pe02 {
                            micro-adjacency-sid;
                        }
                    }
                }
            }
        }
        interface ge-0/0/1.0 {
            point-to-point;
            level 2 {
                srv6-adjacency-segment {
                    unprotected {
                        locator loc-pe02 {
                            micro-adjacency-sid;
                        }
                    }
                }
            }
        }
        interface lo0.0 {
            passive;
        }
        source-packet-routing {
            srv6 {
                locator loc-pe02 {
                    micro-node-sid;
                }
            }
        }
    }
    mpls {
        lsp-external-controller pccd;
    }
    source-packet-routing {
        lsp-external-controller pccd;
        srv6;
        preserve-nexthop-hierarchy;
    }
    pcep {
        pce POLA-PCE {
            local-ipv6-address fd00::2;
            destination-ipv6-address fd00::3;
            pce-type active;
            pce-type stateful;
            lsp-provisioning;
            spring-capability;
            srv6-capability;
        }
    }
}
